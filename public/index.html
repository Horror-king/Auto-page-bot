<!DOCTYPE html>
<html>
<head>
  <title>Admin Login</title>
</head>
<body>
  <h2>Login</h2>
  <input type="text" id="username" placeholder="admin" />
  <input type="password" id="password" placeholder="admin123" />
  <button onclick="login()">Login</button>
  <div id="form" style="display:none;">
    <h3>Register Bot</h3>
    <input id="vtoken" placeholder="Verify Token"><br>
    <input id="ptoken" placeholder="Page Access Token"><br>
    <input id="gkey" placeholder="Gemini API Key"><br>
    <button onclick="setTokens()">Register</button>
  </div>
  <script>
    function login() {
      fetch('/admin-login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          username: document.getElementById('username').value,
          password: document.getElementById('password').value
        })
      }).then(res => {
        if (res.ok) document.getElementById('form').style.display = 'block';
        else alert("Login failed");
      });
    }

    function setTokens() {
      fetch('/set-tokens', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          verifyToken: document.getElementById('vtoken').value,
          pageAccessToken: document.getElementById('ptoken').value,
          geminiKey: document.getElementById('gkey').value
        })
      }).then(res => res.text()).then(alert);
    }
  </script>
</body>
</html>
